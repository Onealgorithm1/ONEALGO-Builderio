<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-NTDV6XG6");
    </script>
    <!-- End Google Tag Manager -->

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-RC48CMQ05T"
    ></script>
    <script>
      // Initialize dataLayer and gtag function
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }

      // Initialize Google Analytics
      gtag("js", new Date());
      gtag("config", "G-RC48CMQ05T", {
        allow_enhanced_conversions: true,
      });

      // Test gtag is working
      console.log("üîß Google Analytics initialized with ID: G-RC48CMQ05T");

      // Test page view tracking
      gtag("event", "page_view", {
        page_title: document.title,
        page_location: window.location.href,
      });

      // Basic conversion tracking function
      window.trackFormSubmission = function () {
        try {
          console.log("üìä Tracking form submission...");

          gtag("event", "contact_form_submission", {
            event_category: "form",
            event_label: "contact",
            value: 1,
          });

          console.log("‚úÖ Form submission tracked successfully");
        } catch (error) {
          console.error("‚ùå Error tracking form submission:", error);
        }
      };
    </script>

    <title>Google Tags Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-button { background: #007cba; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 10px 0; }
        .console-output { background: #f5f5f5; padding: 15px; border-radius: 5px; margin: 10px 0; font-family: monospace; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NTDV6XG6"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <h1>Google Tags Test Page</h1>
    
    <div>
        <h2>Test Results:</h2>
        <div id="results" class="console-output">
            <div>üîç Testing Google Tags...</div>
        </div>
    </div>

    <div>
        <button class="test-button" onclick="testGoogleAnalytics()">Test Google Analytics</button>
        <button class="test-button" onclick="testGTM()">Test Google Tag Manager</button>
        <button class="test-button" onclick="testFormTracking()">Test Form Tracking</button>
    </div>

    <script>
        function addResult(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = type;
            div.textContent = message;
            results.appendChild(div);
        }

        function testGoogleAnalytics() {
            addResult('Testing Google Analytics...', 'info');
            
            // Check if gtag is defined
            if (typeof gtag !== 'undefined') {
                addResult('‚úÖ gtag function is defined', 'success');
                
                // Test sending an event
                try {
                    gtag('event', 'test_event', {
                        event_category: 'test',
                        event_label: 'manual_test',
                        value: 1
                    });
                    addResult('‚úÖ Test event sent successfully', 'success');
                } catch (error) {
                    addResult('‚ùå Error sending test event: ' + error.message, 'error');
                }
            } else {
                addResult('‚ùå gtag function not found', 'error');
            }

            // Check if dataLayer exists
            if (typeof window.dataLayer !== 'undefined') {
                addResult('‚úÖ dataLayer is defined', 'success');
                addResult('üìä dataLayer has ' + window.dataLayer.length + ' items', 'info');
            } else {
                addResult('‚ùå dataLayer not found', 'error');
            }
        }

        function testGTM() {
            addResult('Testing Google Tag Manager...', 'info');
            
            if (typeof window.dataLayer !== 'undefined') {
                addResult('‚úÖ GTM dataLayer is available', 'success');
                
                // Check for GTM-specific items
                const gtmItems = window.dataLayer.filter(item => item['gtm.start'] || item.event === 'gtm.js');
                if (gtmItems.length > 0) {
                    addResult('‚úÖ GTM initialization detected', 'success');
                } else {
                    addResult('‚ö†Ô∏è GTM initialization not detected in dataLayer', 'error');
                }
            } else {
                addResult('‚ùå GTM dataLayer not found', 'error');
            }
        }

        function testFormTracking() {
            addResult('Testing Form Tracking...', 'info');
            
            if (typeof window.trackFormSubmission === 'function') {
                addResult('‚úÖ trackFormSubmission function is available', 'success');
                
                try {
                    window.trackFormSubmission();
                    addResult('‚úÖ Form tracking test completed', 'success');
                } catch (error) {
                    addResult('‚ùå Error in form tracking: ' + error.message, 'error');
                }
            } else {
                addResult('‚ùå trackFormSubmission function not found', 'error');
            }
        }

        // Auto-run tests on page load
        window.addEventListener('load', function() {
            setTimeout(() => {
                testGoogleAnalytics();
                setTimeout(() => testGTM(), 1000);
                setTimeout(() => testFormTracking(), 2000);
            }, 1000);
        });
    </script>
</body>
</html>
